{% extends "base.html.twig" %}

{% block title %}
    My sales
{% endblock %}

{% block body %}
<div class="container">
<h1>Sales of {{artwork.title}}</h1>
<img class="img-fluid" src={{artwork.coverImage}} alt={{artwork.title}}>
    <div class="row">
        {% if artwork.endDate < currentDate and not auctionAccepted %}
            {% if auctions|length > 0 %}
                {% for auction in auctions %}
                        <div class="col-md-6 mb-4">
                            <div class="card">
                                <div class="card-body d-flex justify-content-between align-items-center">
                                    <div>
                                        <h5 class="card-title">{{ auction.user.fullName }}</h5>
                                        <p class="card-text">{{ auction.amount }}</p>
                                        <a href="{{ path('account_sales_accept', {'id': auction.id}) }}" class="btn btn-success">Accepter</a>
                                        <a href="{{ path('account_sales_refuse', {'id': auction.id}) }}" class="btn btn-danger">Refuser</a>
                                    </div>
                                </div>
                            </div>
                        </div>
                {% endfor %}
            {% else %}
                <div>
                    <p>Aucune enchère n'a été faite pour cette oeuvre.</p>
                    <a href="{{ path('account_sales_relaunch', {'slug': artwork.slug}) }}" class="btn btn-warning">Relancer</a>
                </div>
            {% endif %}
        {% else %}
            <div>
                <p>Une offre a déjà été acceptée.</p>
            </div>
        {% endif %} 
    </div>
</div>
{% endblock %}
