{% extends "base.html.twig" %}

{% block title %}
    My auctions
{% endblock %}

{% block body %}
<div class="slide">
    <div class="auctions-container">
        <div class="won-container">
            <div>
                <a href="{{ path('account_profile') }}" class="subText">Profile /</a>
                <a href="{{ path('account_sales_index') }}" class="subText weight">My auctions</a>
            </div>
            <h1>My Auctions</h1>
            <div class="won-img">
            </div>
            <div class="won-content">
                {% if auctions is not empty %}
                    <p>Enchère remportée</p>
                    {% for auction in auctions %}
                        {% if auction.sold == "yes" %}
                            <div class="col-md-6 mb-4">
                                <div class="card">
                                    <div class="card-body d-flex justify-content-between align-items-center">
                                        <div>
                                            <h5 class="card-title">{{ auction.artwork.title }}</h5>
                                            <p class="card-text">{{ auction.amount }}</p>
                                        </div>
                                        <a href="{{ path('artworks_show', {'slug': auction.artwork.slug}) }}" class="btn btn-primary">Voir plus</a>
                                    </div>
                                </div>
                            </div>
                        {% endif %}
                    {% endfor %}
                    <hr>
                {% else %}
                    <p>Aucune enchère remportée pour le moment</p>
                {% endif %}
                        {% if refusedAuctions is not empty %}
            <hr>
            <p>Enchères refusées</p>
            {% for artworkId, refusals in refusedAuctions %}
                {% for refusal in refusals %}
                    <div class="col-md-6 mb-4">
                        <div class="card">
                            <div class="card-body d-flex justify-content-between align-items-center">
                                <div>
                                    <h5 class="card-title">{{ refusal.artwork.title }}</h5>
                                    <p class="card-text">{{ refusal.amount }}</p>
                                </div>
                                <p class="text-danger">Enchère refusée</p>
                            </div>
                        </div>
                    </div>
                {% endfor %}
            {% endfor %}
        {% endif %}
        {% for auction in ongoingAuctions %}
            <div class="col-md-6 mb-4">
                <div class="card">
                    <div class="card-body d-flex justify-content-between align-items-center">
                        <div>
                            <h5 class="card-title">{{ auction.artwork.title }}</h5>
                            <p class="card-text">{{ auction.amount }}</p>
                        </div>
                        <a href="{{ path('artworks_show', {'slug': auction.artwork.slug}) }}" class="btn btn-primary">Voir plus</a>
                    </div>
                </div>
            </div>
        {% endfor %}
            </div>
        </div>
    </div>
</div>
{% endblock %}
